{% extends 'sonnen/base.html' %}
{% block title %}Sonnen battery Status{% endblock %}
{% block body %}

    <script>
      anychart.onDocumentLoad(function () {
        // create an instance of a pie chart
        var chart = anychart.pie();
        // set the data
        chart.data([
          ["Production", {{ production }}],
          ["Consumption", {{ consumption }}],
          ["GridConsumption", {{ gridConsumption }}]
        ]);
        // set chart title
        chart.title("Status from {{ timestamp }}");
        // set the container element
        chart.container("graphic-container");
        // initiate chart display
        chart.draw();
      });
    </script>




    <div class="jumbotron ">
        <div class="container">
            <h1 class="display-4">Status from {{ timestamp }}</h1>
            <h1 class="display-3">PV Production: {{ production }} [W]</h1>
            <h1 class="display-4">Home Consumption: {{ consumption }} [W]</h1>
            {% if gridconsumption < 0 %}
                <h1 class="display-4">Grid Feed-in: {{ gridConsumption }} [W]</h1>
            {% else %}
                <h1 class="display-4">Grid Consumption: {{ gridConsumption }} [W]</h1>
            {% endif %}
             {% if pacTotal < 0 %}
                <h1 class="display-4">Consumption from battery: {{ pacTotal }} [W]</h1>
            {% else %}
                <h1 class="display-4">Battery charging: {{ pacTotal }} [W]</h1>
            {% endif %}
            <h1 class="display-4">Battery Voltage: {{ uBat }} [V]</h1>
            <h1 class="display-4">Battery charge level: {{ usoc }}%</h1>

        </div>
    </div>

        <!-- this draws the graphic -->
    <div id="graphic-container" style="width: 500px; height: 400px;"></div>


{% endblock %}